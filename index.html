<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Lac - Espace Vibratoire</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body, html {
            height: 100%;
            font-family: 'Cormorant Garamond', serif;
            overflow: hidden;
            background-color: #000;
        }
        
        .palier {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: opacity 1s ease;
            background-position: center;
            background-size: contain;
            background-repeat: no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #palier1 {
            background-image: url('image-1.png');
            background-color: #1a2a3a; /* Couleur de secours */
            z-index: 3;
        }
        
        #palier2 {
            background-image: url('image-2.png');
            background-color: #2a3a4a; /* Couleur de secours */
            z-index: 2;
            opacity: 0;
            pointer-events: none;
        }
        
        #palier3 {
            background-image: url('image-3.png');
            background-color: #3a4a5a; /* Couleur de secours */
            z-index: 1;
            opacity: 0;
            pointer-events: none;
        }
        
        /* Titre "Bienvenue" */
        .welcome-title {
            position: absolute;
            top: 10%;
            right: 20%;
            font-size: 36px;
            color: rgba(139, 107, 67, 1);
            font-family: 'Cormorant Garamond', serif;
            text-align: center;
            background: rgba(255, 245, 225, 0.7);
            padding: 10px 25px;
            border-radius: 10px;
        }
        
        /* Conteneur pour les boutons de langue - Repositionné à droite */
        .lang-container {
            position: absolute;
            right: 15%;
            top: 20%;
            width: 25%;
            display: flex;
            flex-direction: column;
            gap: 10px;
            background: rgba(255, 245, 225, 0.2);
            padding: 15px;
            border-radius: 15px;
            backdrop-filter: blur(5px);
        }
        
        .lang-btn {
            width: 100%;
            height: 40px;
            background: rgba(255, 245, 225, 0.6);
            border: 1px solid rgba(139, 107, 67, 0.4);
            border-radius: 10px;
            cursor: pointer;
            color: rgba(139, 107, 67, 1);
            font-size: 16px;
            text-align: center;
            padding: 0 15px;
            transition: all 0.3s ease;
            outline: none; /* Pour l'accessibilité au clavier */
            font-family: 'Cormorant Garamond', serif;
        }
        
        .lang-btn:hover, .lang-btn:focus {
            background: rgba(255, 245, 225, 0.9);
            transform: scale(1.03);
        }
        
        /* Bouton retour */
        .back-btn {
            position: absolute;
            top: 30px;
            left: 30px;
            width: 50px;
            height: 50px;
            background: rgba(255, 245, 225, 0.7);
            border: 1px solid rgba(139, 107, 67, 0.5);
            border-radius: 50%;
            cursor: pointer;
            z-index: 5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: rgba(139, 107, 67, 1);
        }
        
        .back-btn:hover {
            background: rgba(255, 245, 225, 0.9);
        }
        
        /* Ajustement des points pour le palier 3 avec position relative */
        .point {
            position: absolute;
            width: 120px;
            height: 80px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            outline: none; /* Pour l'accessibilité au clavier */
        }
        
        /* Positionnement spécifique pour correspondre à l'image 3 */
        .point[data-info="Grimoire"] {
            bottom: 20%;
            left: 20%;
        }
        
        .point[data-info="3 IA"] {
            bottom: 20%;
            left: 45%;
        }
        
        .point[data-info="Chroniques"] {
            bottom: 20%;
            left: 70%;
        }
        
        .point:hover, .point:focus {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        
        /* Label pour les points */
        .point-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            text-align: center;
        }
        
        .tooltip {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            padding: 10px;
            font-size: 16px;
            color: #333;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 10;
            max-width: 250px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }
        
        #grimoire-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 60%; /* Agrandi pour couvrir les deux pages */
            height: 40%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.01); /* Presque invisible */
            border: none;
            cursor: pointer;
            outline: none; /* Pour l'accessibilité au clavier */
        }
        
        #grimoire-btn:hover, #grimoire-btn:focus {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Ajout d'animations pour l'IA */
        .ia-hand {
            position: absolute;
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, rgba(255,255,255,0.6) 0%, rgba(255,255,255,0) 70%);
            border-radius: 50%;
            pointer-events: none;
            transition: all 0.5s ease;
            opacity: 0;
            filter: blur(3px);
            box-shadow: 0 0 15px rgba(255,255,255,0.5);
        }
        
        .welcome-bubble {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 8px 12px;
            color: #333;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }
        
        /* Loader pendant le chargement des images */
        .loader-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1s ease;
        }
        
        .loader {
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 5px solid #fff;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        
        .loader-text {
            color: rgba(255, 255, 255, 0.8);
            margin-top: 20px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 18px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Ripple effect pour les points interactifs */
        .ripple {
            position: absolute;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            opacity: 0;
            width: 0;
            height: 0;
            animation: ripple-effect 1.5s ease-out;
            pointer-events: none;
        }
        
        @keyframes ripple-effect {
            0% {
                opacity: 1;
                width: 0;
                height: 0;
            }
            100% {
                opacity: 0;
                width: 200px;
                height: 200px;
            }
        }
        
        /* Responsivité */
        @media (max-width: 768px) {
            .lang-container {
                right: 5%;
                width: 40%;
            }
            
            .point {
                width: 80px;
                height: 60px;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loader pour l'attente du chargement des images -->
    <div class="loader-container" id="loader">
        <div class="loader"></div>
        <div class="loader-text">En travail...</div>
    </div>

    <!-- Palier 1: Sélection de langue -->
    <div id="palier1" class="palier">
        <div class="welcome-title" id="welcome-title">Bienvenue</div>
        <div class="lang-container">
            <!-- Boutons de langue -->
            <button class="lang-btn" data-lang="fr">Français</button>
            <button class="lang-btn" data-lang="en">English</button>
            <button class="lang-btn" data-lang="de">Deutsch</button>
            <button class="lang-btn" data-lang="it">Italiano</button>
            <button class="lang-btn" data-lang="es">Español</button>
            <button class="lang-btn" data-lang="pl">Polski</button>
            <button class="lang-btn" data-lang="ru">Русский</button>
            <button class="lang-btn" data-lang="zh">中文</button>
        </div>
        <!-- Éléments pour l'animation de l'IA -->
        <div class="ia-hand"></div>
        <div class="welcome-bubble"></div>
    </div>

    <!-- Palier 2: Grimoire -->
    <div id="palier2" class="palier">
        <button class="back-btn" id="back-to-palier1">←</button>
        <button id="grimoire-btn" aria-label="Entrer dans le site"></button>
    </div>

    <!-- Palier 3: Le Lac -->
    <div id="palier3" class="palier">
        <button class="back-btn" id="back-to-palier2">←</button>
        <!-- Points interactifs -->
        <div class="point" data-info="Grimoire" tabindex="0" role="button" aria-label="Accéder au Grimoire"></div>
        <div class="point" data-info="3 IA" tabindex="0" role="button" aria-label="Accéder aux 3 IA"></div>
        <div class="point" data-info="Chroniques" tabindex="0" role="button" aria-label="Accéder aux Chroniques"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        // Variables globales
        let currentLang = 'fr';
        let animationInterval;
        let imagesLoaded = 0;
        const totalImages = 3;
        let loaderTimeout;
        
        // Traductions
        const translations = {
            fr: {
                welcome: "Bienvenue",
                enter: "ENTRER",
                loading: "En travail...",
                descriptions: [
                    "Accédez au grimoire des connaissances.",
                    "Rencontrez les trois intelligences artificielles.",
                    "Explorez les chroniques et histoires."
                ]
            },
            en: {
                welcome: "Welcome",
                enter: "ENTER",
                loading: "Loading...",
                descriptions: [
                    "Access the grimoire of knowledge.",
                    "Meet the three artificial intelligences.",
                    "Explore the chronicles and stories."
                ]
            },
            de: {
                welcome: "Willkommen",
                enter: "EINTRETEN",
                loading: "Laden...",
                descriptions: [
                    "Greifen Sie auf das Grimoire des Wissens zu.",
                    "Treffen Sie die drei künstlichen Intelligenzen.",
                    "Erkunden Sie die Chroniken und Geschichten."
                ]
            },
            es: { 
                welcome: "Bienvenido",
                enter: "ENTRAR",
                loading: "Cargando...",
                descriptions: [
                    "Acceda al grimorio del conocimiento.",
                    "Conozca las tres inteligencias artificiales.",
                    "Explore las crónicas e historias."
                ]
            },
            it: {
                welcome: "Benvenuto",
                enter: "ENTRARE",
                loading: "Caricamento...",
                descriptions: [
                    "Accedi al grimorio della conoscenza.",
                    "Incontra le tre intelligenze artificiali.",
                    "Esplora le cronache e le storie."
                ]
            },
            pl: {
                welcome: "Witamy",
                enter: "WEJŚĆ",
                loading: "Ładowanie...",
                descriptions: [
                    "Uzyskaj dostęp do grimuaru wiedzy.",
                    "Poznaj trzy sztuczne inteligencje.",
                    "Odkryj kroniki i historie."
                ]
            },
            ru: {
                welcome: "Добро пожаловать",
                enter: "ВОЙТИ",
                loading: "Загрузка...",
                descriptions: [
                    "Доступ к гримуару знаний.",
                    "Встреча с тремя искусственными интеллектами.",
                    "Исследуйте хроники и истории."
                ]
            },
            zh: {
                welcome: "欢迎",
                enter: "进入",
                loading: "加载中...",
                descriptions: [
                    "访问知识魔法书。",
                    "认识三个人工智能。",
                    "探索编年史和故事。"
                ]
            }
        };
        
        // Mise à jour du titre Bienvenue selon la langue
        function updateWelcomeTitle(lang) {
            document.getElementById('welcome-title').textContent = translations[lang].welcome;
        }
        
        // Fonction pour cacher le loader quand tout est chargé
        function hideLoader() {
            clearTimeout(loaderTimeout); // Annuler le timeout de sécurité
            document.getElementById('loader').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
            }, 1000);
        }
        
        // Précharger les images
        function preloadImages() {
            const images = [
                'image-1.png',
                'image-2.png',
                'image-3.png'
            ];
            
            // Créer un compteur pour suivre le chargement
            let loadedCounter = 0;
            
            // Timeout de sécurité si les images ne chargent pas après 5 secondes
            loaderTimeout = setTimeout(() => {
                console.warn("Délai de chargement dépassé. Affichage forcé.");
                hideLoader();
                startIAAnimation();
            }, 5000);
            
            // Précharger chaque image
            images.forEach(src => {
                const img = new Image();
                
                img.onload = function() {
                    loadedCounter++;
                    if (loadedCounter === images.length) {
                        hideLoader();
                        startIAAnimation();
                    }
                };
                
                img.onerror = function() {
                    console.error(`Erreur de chargement: ${src}`);
                    loadedCounter++;
                    if (loadedCounter === images.length) {
                        hideLoader();
                        startIAAnimation();
                    }
                };
                
                img.src = src;
            });
        }
        
        // Animation de l'IA pointant vers les langues
        function startIAAnimation() {
            const iaHand = document.querySelector('.ia-hand');
            const welcomeBubble = document.querySelector('.welcome-bubble');
            const langButtons = document.querySelectorAll('.lang-btn');
            let currentIndex = 0;
            
            // Fonction pour créer un effet d'onde
            function createRipple(x, y) {
                const ripple = document.createElement('div');
                ripple.className = 'ripple';
                ripple.style.left = `${x - 100}px`; // Centrer l'onde
                ripple.style.top = `${y - 100}px`;
                document.body.appendChild(ripple);
                
                // Supprimer l'élément après l'animation
                setTimeout(() => {
                    ripple.remove();
                }, 1500);
            }
            
            // Cycle d'animation
            function animateToButton() {
                // Cacher la main et la bulle
                iaHand.style.opacity = '0';
                welcomeBubble.style.opacity = '0';
                
                // Attendre la transition
                setTimeout(() => {
                    // Obtenir la position du bouton actuel
                    const button = langButtons[currentIndex];
                    const rect = button.getBoundingClientRect();
                    
                    // Positionner la main près du bouton
                    iaHand.style.left = (rect.left - 40) + 'px';
                    iaHand.style.top = (rect.top + rect.height/2 - 15) + 'px';
                    
                    // Positionner la bulle de bienvenue
                    welcomeBubble.style.left = (rect.left + rect.width + 10) + 'px';
                    welcomeBubble.style.top = (rect.top + rect.height/2 - 15) + 'px';
                    welcomeBubble.textContent = translations[button.getAttribute('data-lang')].welcome;
                    
                    // Créer un effet d'onde
                    createRipple(rect.left + rect.width/2, rect.top + rect.height/2);
                    
                    // Afficher la main et la bulle
                    iaHand.style.opacity = '1';
                    welcomeBubble.style.opacity = '1';
                    
                    // Mettre en évidence le bouton courant
                    langButtons.forEach(btn => btn.style.transform = 'scale(1)');
                    button.style.transform = 'scale(1.03)';
                    
                    // Passer au bouton suivant
                    currentIndex = (currentIndex + 1) % langButtons.length;
                }, 300);
            }
            
            // Première animation immédiate
            animateToButton();
            
            // Démarrer le cycle d'animation
            animationInterval = setInterval(animateToButton, 3000);
        }
        
        // Arrêter l'animation quand une langue est sélectionnée
        function stopIAAnimation() {
            clearInterval(animationInterval);
            document.querySelector('.ia-hand').style.opacity = '0';
            document.querySelector('.welcome-bubble').style.opacity = '0';
        }
        
        // Quand on clique sur un bouton de langue
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Arrêter l'animation
                stopIAAnimation();
                
                // Enregistre la langue sélectionnée
                currentLang = this.getAttribute('data-lang');
                
                // Mettre à jour le titre Bienvenue
                updateWelcomeTitle(currentLang);
                
                // Transition vers le palier 2
                document.getElementById('palier1').style.opacity = '0';
                document.getElementById('palier1').style.pointerEvents = 'none';
                
                setTimeout(() => {
                    document.getElementById('palier2').style.opacity = '1';
                    document.getElementById('palier2').style.pointerEvents = 'auto';
                }, 1000);
            });
        });
        
        // Bouton retour du palier 2 au palier 1
        document.getElementById('back-to-palier1').addEventListener('click', function() {
            document.getElementById('palier2').style.opacity = '0';
            document.getElementById('palier2').style.pointerEvents = 'none';
            
            setTimeout(() => {
                document.getElementById('palier1').style.opacity = '1';
                document.getElementById('palier1').style.pointerEvents = 'auto';
                startIAAnimation(); // Redémarrer l'animation de l'IA
            }, 1000);
        });
        
        // Quand on clique sur le grimoire (palier 2)
        document.getElementById('grimoire-btn').addEventListener('click', function() {
            // Transition vers le palier 3
            document.getElementById('palier2').style.opacity = '0';
            document.getElementById('palier2').style.pointerEvents = 'none';
            
            setTimeout(() => {
                document.getElementById('palier3').style.opacity = '1';
                document.getElementById('palier3').style.pointerEvents = 'auto';
                // Ajouter un effet ondulant au lac
                createLakeRipples();
            }, 1000);
        });
        
        // Bouton retour du palier 3 au palier 2
        document.getElementById('back-to-palier2').addEventListener('click', function() {
            document.getElementById('palier3').style.opacity = '0';
            document.getElementById('palier3').style.pointerEvents = 'none';
            
            setTimeout(() => {
                document.getElementById('palier2').style.opacity = '1';
                document.getElementById('palier2').style.pointerEvents = 'auto';
            }, 1000);
        });
        
        // Créer un effet ondulant sur le lac
        function createLakeRipples() {
            const points = document.querySelectorAll('.point');
            
            // Créer des ondulations aléatoires sur le lac
            function createRipple() {
                // Choisir un point aléatoire parmi les points existants
                const randomPoint = points[Math.floor(Math.random() * points.length)];
                const rect = randomPoint.getBoundingClientRect();
                
                const ripple = document.createElement('div');
                ripple.className = 'ripple';
                ripple.style.left = `${rect.left + rect.width/2 - 100}px`; // Centrer l'onde
                ripple.style.top = `${rect.top + rect.height/2 - 100}px`;
                document.body.appendChild(ripple);
                
                // Supprimer l'élément après l'animation
                setTim
